version: 2.1
jobs:
  Fetch-Code:
    docker:
      - image: cimg/base:stable
    steps:
      - checkout
  Unit-Test:
    docker:
      - image: ubuntu:focal
    steps:
      - run:
          name: Install gawk and git
          command: |
            apt update && apt -y install gawk
      - run:
          name: Run Unit Tests
          command: |
            ./tests/test.sh gawk
            ./tests/test.sh nawk
            ./tests/test.sh mawk
workflows:
  unit_test:
    jobs:
      - Fetch-Code
      - Unit-Test:
          requires:
            - Fetch-Code
